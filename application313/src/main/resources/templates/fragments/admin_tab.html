<div th:fragment="tab1">

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="users-tab" data-toggle="tab" href="#usersTab" role="tab"
               aria-controls="usersTab" aria-selected="true">Users</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="adduser-tab" data-toggle="tab" href="#adduserTab" role="tab"
               aria-controls="adduserTab" aria-selected="false">New User</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade show active" id="usersTab" role="tabpanel" aria-labelledby="users-tab">
            <h2>Users</h2>
            <br>
            <br>
            <br>
            <div id="blockTable">
                <div class="container">
                    <div class="row">

                    </div>
                </div>
            </div>

            <div id="films">
                <div class="container">
                    <h2 class="text-center mt-4">Heroku Films</h2>
                    <div class="row">
                    </div>
                </div>
            </div>

            <script>
                // <div th:replace="fragments/users_table :: usersTable"></div>

                // function getUsersTable() {
                //      fetch('/api/users')
                //         .then(function (response) {
                //             return response.json();
                //         }).then(jsonList =>{console.log(Array.from(jsonList, x => x.lastname));
                //         });
                // }
                // let mainContent = '',
                //     main = document.querySelector('#films .row');

                function getUsersTable() {

                    const fetchPromise = fetch("/api/users");
                    let mainContent = '',
                        main = document.querySelector('#blockTable .row');

                    fetchPromise.then(response => {
                        return response.json();
                    }).then(usersList => {
                        usersList.forEach(user => {
                            mainContent+=`
  <div class="col-md-6 film-heroku my-3">
    <div class="card border-primary">
  	<div class="card-header bg-primary text-light">
  	  <div class="card-title">
  	    <h2>${user.id}</h2>
  	    <h4>Director: ${user.name}</h4>
  	    <h4>Producer: ${user.lastname}</h4>
  	    <h4>Release Date: ${user.password}</h4>
  	  </div>
  	</div>
  	<div class="card-body" data-id="${user.id}">
  	  <div class="card-text">${user.mail}</div>
     </div>
    </div>
  </div>`;
                        });
                        console.log(usersList);
                        main.innerHTML = mainContent;
                    });

  //                   fetch('/api/users')
  //                       .then(function (response) {
  //                           return response.json();
  //                       }).then(usersList => {
  //                       console.log(Array.from(usersList, x => x.lastname));
  //
  //                       // mainContent+=`<div th:replace="fragments/users_table :: usersTable"></div>`;
  //                       mainContent+=`
  // <div class="col-md-6 film-heroku my-3">
  //   <div class="card border-primary">
  // 	<div class="card-header bg-primary text-light">
  // 	  <div class="card-title">
  // 	    <h2>${x.id}</h2>
  // 	    <h4>Director: ${x.name}</h4>
  // 	    <h4>Producer: ${x.lastname}</h4>
  // 	    <h4>Release Date: ${x.mail}</h4>
  // 	  </div>
  // 	</div>
  //   </div>
  // </div>`;
  //                   });
  //
  //                   main.innerHTML = mainContent;

                }

            </script>


        </div>
        <div class="tab-pane fade" id="adduserTab" role="tabpanel" aria-labelledby="adduser-tab">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 ">
                        <div class="panel panel-default">
                            <div class="p-2 mb-2 bg-light rounded">
                                <div class="panel-body font-weight-bold ">Add new user</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-body bg-white">
                    <div class="container h-100">
                        <div class="row h-100 text-md-center justify-content-center ">
                            <form class="col-3" th:action="@{/add}" th:object="${userAdd}" method="POST">
                                <div class="form-group">
                                    <!--                                    <label for="nameAdd" class="text-center">FirstName</label>-->
                                    <label for="nameAdd"
                                           class="center-block  font-weight-bold">Name</label>
                                    <input type="text" class="form-control bg-warning" name="nameAdd"
                                           id="nameAdd" th:field="*{name}">
                                </div>
                                <div class="form-group">
                                    <label for="lastnameAdd"
                                           class="center-block  font-weight-bold">LastName</label>
                                    <input type="text" class="form-control bg-warning" name="lastnameAdd"
                                           id="lastnameAdd" th:field="*{lastname}">
                                </div>
                                <div class="form-group">
                                    <label for="passwordAdd"
                                           class="center-block  font-weight-bold">Password</label>
                                    <input type="text" class="form-control bg-warning" name="passwordAdd"
                                           id="passwordAdd" th:field="*{password}">
                                    <!--                                       th:value="*{password}"-->
                                </div>
                                <div class="form-group">
                                    <label for="mailAdd" class="center-block  font-weight-bold">Mail</label>
                                    <input type="text" class="form-control bg-warning" name="mailAdd"
                                           id="mailAdd" th:field="*{mail}">
                                </div>
                                <div class="form-group">
                                    <label for="mailAdd" class="center-block  font-weight-bold">Role</label>
                                    <select class="custom-select" multiple="multiple" id="idRoles" name="idRoles">
                                        <option selected th:value="${rolesAll.get(0).getId()}" th:text="ADMIN"></option>
                                        <option value="1" th:value="${rolesAll.get(1).getId()}" th:text="USER"></option>
                                    </select>
                                </div>
                                <br>
                                <br>

                                <div class="form-group">
                                    <input type="submit" class="btn-success" value="Add new user">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="userTab" role="tabpanel" aria-labelledby="user-tab">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 ">
                        <div class="panel panel-default">
                            <div class="p-2 mb-2 bg-light rounded">
                                <div class="panel-body font-weight-bold ">Add new user</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

