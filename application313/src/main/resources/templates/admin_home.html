<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">


<head>
    <title>Home</title>


    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</head>
<body>

<!-- HTML-код адаптивно-резинового контейнера -->
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12 ">
            <div th:replace="fragments/topPanel.html :: topPanel"></div>
        </div>
    </div>
    <div class="row ">
        <div class="col-md-2" id="md2">

            <div class="btn-group-vertical btn-group-toggle btn-block" id="radioTab" data-toggle="buttons">
                <label class="btn btn-light btn-outline-primary active">
                    <input type="radio" name="options" id="option1" value="optionAdmin"
                           onclick="location.href = '/admin';" checked>ADMIN
                </label>
                <label class="btn btn-outline-primary btn-light">
                    <input type="radio" name="options" value="optionUser" id="option2"
                           onclick="location.href = '/user';">USER
                </label>
            </div>
        </div>
        <div class="col-md-10 bg-light">

            <div th:replace="fragments/admin_tab.html :: tab1"></div>

        </div>
    </div>
</div>

<!--<script type="text/javascript">-->
<!--    $(window).on('load', function () {-->
<!--        $("#deleteModal").modal("show");-->
<!--    });-->
<!--</script>-->


<div id="films">
    <div class="container">
        <h2 class="text-center mt-4">Heroku Films</h2>
        <div class="row">
        </div>
    </div>
</div>

<script>

    function openDeleteModal(id) {

        const fetchPromise = fetch("https://ghibliapi.herokuapp.com/films");
        let mainContent = '',
            main = document.querySelector('#films .row');

        fetchPromise.then(response => {
            return response.json();
        }).then(films => {
            films.forEach(film => {
                mainContent+=`
                      <div class="col-md-6 film-heroku my-3">
                        <div class="card border-primary">
                        <div class="card-header bg-primary text-light">
                          <div class="card-title">
                            <h2>${film.title}</h2>
                            <h4>Director: ${film.director}</h4>
                            <h4>Producer: ${film.producer}</h4>
                            <h4>Release Date: ${film.release_date}</h4>
                          </div>
                        </div>
                        <div class="card-body" data-id="${film.id}">
                          <div class="card-text">${film.description}</div>
                         </div>
                        </div>
                      </div>`;
            });
            console.log(films);
            main.innerHTML = mainContent;
        });


        // const fetchPromise = fetch("https://ghibliapi.herokuapp.com/films");
        // fetchPromise.then(response => {
        //     return response.json();
        // }).then(films => {
        //     console.log(films);
        // });

        // alert("myCall1");
        // $.ajax({
        //     url: "/delete/" + id,
        //     success: function (data) {
        //         // alert(data);
        //         $("#personModalHolder").html(data);
        //         $("#deleteModal").modal("show");
        //     }
        // });


        // fetchPromise = fetch("/api/users");
        // let mainContent = '',
        //     main = document.querySelector('#personModalHolder');
        // fetchPromise.then(response => {
        //     return response.json();
        // }).then(films => {
        //     films.forEach(film => {
        //             alert(film);
        //         }
        //     );
        // });
        // $(window).on('load', function () {
        //     $("#deleteModal").modal("show");
        // });

        // $("#deleteModal").modal("show");

        // alert("myCall33");

        // fetch('/api/users')
        //     .then(response => response.json())
        //     .then(data => {
        //         console.log("GGGG begin ddd");
        //         console.log(data) // Prints result from `response.json()` in getRequest
        //     })
        //     .catch(error => console.error(error));
        // fetch('/api/users')
        // .then(data => {
        //     console.log("GGGG begin ddd");
        //     // console.log(data) // Prints result from `response.json()` in getRequest
        // });

        // alert("myCall33");
    }
    // $("#deleteModal").modal("show");



</script>


</body>
</html>