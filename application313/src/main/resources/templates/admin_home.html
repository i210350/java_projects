<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">


<head>
    <title>Home</title>


    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</head>
<body>

<!-- HTML-код адаптивно-резинового контейнера -->
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12 ">
            <div th:replace="fragments/topPanel.html :: topPanel"></div>
        </div>
    </div>
    <div class="row ">
        <div class="col-md-2" id="md2">
<!--            onclick="location.href = '/admin';"-->
<!--            onclick="location.href = '/user';"-->
            <div class="btn-group-vertical btn-group-toggle btn-block" id="radioTab" data-toggle="buttons">
                <label class="btn btn-light btn-outline-primary active">
                    <input type="radio" name="options" id="option1" value="optionAdmin"
                           onclick="onClickChangeUser()" checked>ADMIN
                </label>
                <label class="btn btn-outline-primary btn-light">
                    <input type="radio" name="options" value="optionUser" id="option2"
                           onclick="onClickChangeUser()">USER
                </label>
                <script>

                    let newTable = '' ;

                    function getUsersTable() {
                        newTable = '' ;
                        let i = 0;
                        document.getElementById('blockTable').innerHTML = newTable;
                        newTable = "<table border='1' width='80%'>";
                        // newTable = "<table border='1' width='80%'><tr>";
                        // fetch('/api/users')
                        //     .then(function (response) {
                        //         return response.json();
                        //     }).then(usersList =>{
                        //     Array.from( usersList, function (user) {
                        //         newTable += "<td align='center'>" + user.name + "</td>";
                        //     });
                        //     newTable += "</tr></table>";
                        //     document.getElementById('blockTable').innerHTML = newTable;
                        // });

                        fetch('/api/users')
                            .then(function (response) {
                                return response.json();
                            }).then(usersList =>{
                            Array.from( usersList, function (user) {
                                newTable += "<tr>";
                                newTable += "<td align='center'>" + user.id + "</td>";
                                newTable += "<td align='center'>" + user.name + "</td>";
                                newTable += "<td align='center'>" + user.lastname + "</td>";
                                newTable += "<td align='center'>" + user.mail + "</td>";
                                newTable += "<td align='center'>" + user.active + "</td>";
                                newTable += "</tr>";
                            });
                            // newTable += "</tr></table>";
                            newTable += "</table>";
                            document.getElementById('blockTable').innerHTML = newTable;
                        });

                        // console.log(newTable);
                    }


                    function onClickChangeUser() {
                        getUsersTable();
                    }

                </script>
            </div>
        </div>
        <div class="col-md-10 bg-light">

            <div th:replace="fragments/admin_tab.html :: tab1"></div>

        </div>
    </div>
</div>

<div th:replace="fragments/editModal.html :: editModal"></div>



</body>
</html>